(()=>{"use strict";var e={941:(e,n,t)=>{t.d(n,{Z:()=>o});var r=t(601),a=t.n(r),i=t(609),s=t.n(i)()(a());s.push([e.id,".navigation {\r\n  display: flex;\r\n  justify-content: center;\r\n  gap: 20px;\r\n  padding: 10px;\r\n}",""]);const o=s},386:(e,n,t)=>{t.d(n,{Z:()=>o});var r=t(601),a=t.n(r),i=t(609),s=t.n(i)()(a());s.push([e.id,".controlls-container {\r\n  margin: 0 auto;\r\n  margin-bottom: 20px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  gap: 20px;\r\n}\r\n\r\n.controlls-container_controlls-line {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 20px;\r\n}\r\n\r\n.input-text {\r\n  height: 30px;\r\n  width: 150px;\r\n  color: black;\r\n}\r\n\r\n.input-text:focus {\r\n  outline: none;\r\n}\r\n\r\n.input-color {\r\n  appearance: none;\r\n  height: 30px;\r\n  border: none;\r\n  padding: 1px;\r\n}\r\n\r\n.input-color::-webkit-color-swatch-wrapper {\r\n  padding: 0;\r\n}",""]);const o=s},142:(e,n,t)=>{t.d(n,{Z:()=>v});var r=t(601),a=t.n(r),i=t(609),s=t.n(i),o=t(991),d=t.n(o),c=new URL(t(10),t.b),l=s()(a()),u=d()(c);l.push([e.id,".cars-count,\r\n.winners-count,\r\n.page-number {\r\n  font-size: inherit;\r\n}\r\n\r\n.garage {\r\n  margin: 10px 0 40px;\r\n}\r\n\r\n.garage-road {\r\n  margin: 5px 0 10px;\r\n  border-bottom: 2px dashed #fff;\r\n  display: flex;\r\n}\r\n\r\n.engine-controlls {\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  gap: 10px;\r\n  padding: 5px 0;\r\n}\r\n\r\n.engine-button {\r\n  width: 25px;\r\n  height: 25px;\r\n  border: 1px solid;\r\n  border-radius: 5px;\r\n  background-color: transparent;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.engine-button[data-destiny='start'] {\r\n  border-color: rgb(41, 226, 24);\r\n  color: rgb(41, 226, 24);\r\n}\r\n\r\n.engine-button[data-destiny='stop'] {\r\n  border-color: rgb(226, 24, 24);\r\n  color: rgb(226, 24, 24);\r\n}\r\n\r\n.engine-button.disabled {\r\n  border-color: grey;\r\n  color: grey;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.race-direction {\r\n  position: relative;\r\n  display: flex;\r\n  flex: 1;\r\n  margin-left: 20px;\r\n  margin-bottom: 2px;\r\n  align-items: flex-end;\r\n}\r\n\r\n.finish-line {\r\n  position: absolute;\r\n  right: 135px;\r\n  bottom: -4px;\r\n  height: 100%;\r\n  width: 5px;\r\n  background: #fff;\r\n}\r\n\r\n.car {\r\n  min-width: 110px;\r\n  height: 45px;\r\n  mask-image: url("+u+");\r\n  mask-size: cover;\r\n  mask-repeat: no-repeat;\r\n  mask-position: center;\r\n  -webkit-mask-image: url("+u+");\r\n  -webkit-mask-size: cover;\r\n  -webkit-mask-repeat: no-repeat;\r\n  -webkit-mask-position: center;\r\n}\r\n\r\n.drive {\r\n  animation-name: race;\r\n  animation-fill-mode: forwards;\r\n}\r\n\r\n.crash {\r\n  animation-play-state: paused;\r\n}\r\n\r\n.winner-message {\r\n  position: fixed;\r\n  top: calc(50vh - 30px);\r\n  z-index: 100;\r\n  height: 60px;\r\n  width: 100vw;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  font-size: 48px;\r\n  font-weight: bold;\r\n  color: red;\r\n  text-align: center;\r\n}\r\n\r\n@keyframes race {\r\n  0% {\r\n    margin-left: 0;\r\n  }\r\n  100% {\r\n    margin-left: calc(100% - 130px);\r\n  }\r\n}",""]);const v=l},372:(e,n,t)=>{t.d(n,{Z:()=>o});var r=t(601),a=t.n(r),i=t(609),s=t.n(i)()(a());s.push([e.id,".page-container {\r\n  position: absolute;\r\n  z-index: 0;\r\n  left: 100vw;\r\n  width: 100vw;\r\n  display: flex;\r\n  padding: 10px 40px;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n}\r\n\r\n.page-container.active {\r\n  left: 0;\r\n  z-index: 10;\r\n}",""]);const o=s},364:(e,n,t)=>{t.d(n,{Z:()=>v});var r=t(601),a=t.n(r),i=t(609),s=t.n(i),o=t(991),d=t.n(o),c=new URL(t(637),t.b),l=s()(a()),u=d()(c);l.push([e.id,".winners-header {\r\n  margin: auto;\r\n  margin-top: 20px;\r\n  height: 60px;\r\n  width: 70vw;\r\n  background-color: rgb(0, 153, 255);\r\n  display: flex;\r\n}\r\n\r\n.winners {\r\n  margin: auto;\r\n  width: 70vw;\r\n}\r\n\r\n.winners-line {\r\n  border-bottom: 2px solid #fff;\r\n  display: flex;\r\n}\r\n\r\n.winners-cell {\r\n  width: 22.5%;\r\n  padding: 10px;\r\n  font-size: 24px;\r\n  font-weight: bold;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.winners-cell.small {\r\n  width: 10%;\r\n}\r\n\r\n.winners-navigation {\r\n  margin-top: 60px;\r\n}\r\n\r\n[data-sort] {\r\n  position: relative;\r\n  cursor: pointer;\r\n  transition: .2s linear;\r\n}\r\n\r\n[data-sort]:hover {\r\n  background-color: rgb(0, 108, 180);\r\n}\r\n\r\n[data-sort]::after {\r\n  content: '';\r\n  position: absolute;\r\n  top: 15px;\r\n  right: 85px;\r\n  background-image: url("+u+');\r\n  background-repeat: no-repeat;\r\n  background-size: contain;\r\n  transform: rotate(90deg);\r\n  filter: invert(100%) sepia(0%) saturate(0%) hue-rotate(319deg) brightness(104%) contrast(102%);\r\n}\r\n\r\n\r\n[data-sort="tobig"]::after,\r\n[data-sort="tofast"]::after {\r\n  width: 30px;\r\n  height: 30px;\r\n}\r\n\r\n[data-sort="tosmall"]::after,\r\n[data-sort="toslow"]::after {\r\n  width: 30px;\r\n  height: 30px;\r\n  transform: rotate(-90deg);\r\n}',""]);const v=l},174:(e,n,t)=>{t.d(n,{Z:()=>o});var r=t(601),a=t.n(r),i=t(609),s=t.n(i)()(a());s.push([e.id,"* {\r\n  margin: 0;\r\n  box-sizing: border-box;\r\n  overflow-x: hidden;\r\n  font-size: 18px;\r\n  color: #fff;\r\n  font-family: 'Forum';\r\n}\r\n\r\nhtml {\r\n  scroll-behavior: smooth;\r\n}\r\n\r\nbody {\r\n  background-color: #000;\r\n}\r\n\r\nh2 {\r\n  font-size: 36px;\r\n}\r\n\r\nh3 {\r\n  font-size: 30px;\r\n}\r\n\r\nh4 {\r\n  font-size: 24px;\r\n}\r\n\r\nh2, h3, h4 {\r\n  margin: 10px 0;\r\n  text-align: center;\r\n}\r\n\r\na {\r\n  text-decoration: none;\r\n}\r\n\r\nbutton {\r\n  cursor: pointer;\r\n  border: none;\r\n}\r\n\r\n::-webkit-scrollbar {\r\n  width: 0;\r\n}\r\n\r\n.button {\r\n  min-width: 90px;\r\n  height: 25px;\r\n  margin-bottom: 3px;\r\n  background-color: chartreuse;\r\n  border-radius: 5px;\r\n  box-shadow: 0px 3px 0px rgb(81, 161, 81);\r\n  text-align: center;\r\n  color: black;\r\n}\r\n\r\n.button.blue {\r\n  background-color: rgb(0, 153, 255);\r\n  box-shadow: 0px 3px 0px rgb(27, 92, 117);\r\n}\r\n\r\n.button:active,\r\n.button.blue:active {\r\n  transform: translateY(3px);\r\n  box-shadow: none;\r\n  top: 3px;\r\n}\r\n\r\n.button.disabled {\r\n  filter: brightness(50%);\r\n  cursor: not-allowed;\r\n}\r\n\r\n.button.disabled:active{\r\n  top: 0;\r\n  box-shadow: 0px 3px 0px rgb(34, 69, 88);\r\n}\r\n\r\n.flex-column {\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  gap: 20px;\r\n}\r\n\r\n.flex-row {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 20px;\r\n}\r\n\r\n.center-content {\r\n  justify-content: center;\r\n}",""]);const o=s},609:e=>{e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var t="",r=void 0!==n[5];return n[4]&&(t+="@supports (".concat(n[4],") {")),n[2]&&(t+="@media ".concat(n[2]," {")),r&&(t+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),t+=e(n),r&&(t+="}"),n[2]&&(t+="}"),n[4]&&(t+="}"),t})).join("")},n.i=function(e,t,r,a,i){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(r)for(var o=0;o<this.length;o++){var d=this[o][0];null!=d&&(s[d]=!0)}for(var c=0;c<e.length;c++){var l=[].concat(e[c]);r&&s[l[0]]||(void 0!==i&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=i),t&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=t):l[2]=t),a&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=a):l[4]="".concat(a)),n.push(l))}},n}},991:e=>{e.exports=function(e,n){return n||(n={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),n.hash&&(e+=n.hash),/["'() \t\n]|(%20)/.test(e)||n.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},601:e=>{e.exports=function(e){return e[1]}},672:(e,n,t)=>{t.r(n),t.d(n,{default:()=>f});var r=t(62),a=t.n(r),i=t(36),s=t.n(i),o=t(793),d=t.n(o),c=t(892),l=t.n(c),u=t(173),v=t.n(u),h=t(464),m=t.n(h),p=t(941),g={};g.styleTagTransform=m(),g.setAttributes=l(),g.insert=d().bind(null,"head"),g.domAPI=s(),g.insertStyleElement=v(),a()(p.Z,g);const f=p.Z&&p.Z.locals?p.Z.locals:void 0},381:(e,n,t)=>{t.r(n),t.d(n,{default:()=>f});var r=t(62),a=t.n(r),i=t(36),s=t.n(i),o=t(793),d=t.n(o),c=t(892),l=t.n(c),u=t(173),v=t.n(u),h=t(464),m=t.n(h),p=t(386),g={};g.styleTagTransform=m(),g.setAttributes=l(),g.insert=d().bind(null,"head"),g.domAPI=s(),g.insertStyleElement=v(),a()(p.Z,g);const f=p.Z&&p.Z.locals?p.Z.locals:void 0},305:(e,n,t)=>{t.r(n),t.d(n,{default:()=>f});var r=t(62),a=t.n(r),i=t(36),s=t.n(i),o=t(793),d=t.n(o),c=t(892),l=t.n(c),u=t(173),v=t.n(u),h=t(464),m=t.n(h),p=t(142),g={};g.styleTagTransform=m(),g.setAttributes=l(),g.insert=d().bind(null,"head"),g.domAPI=s(),g.insertStyleElement=v(),a()(p.Z,g);const f=p.Z&&p.Z.locals?p.Z.locals:void 0},742:(e,n,t)=>{t.r(n),t.d(n,{default:()=>f});var r=t(62),a=t.n(r),i=t(36),s=t.n(i),o=t(793),d=t.n(o),c=t(892),l=t.n(c),u=t(173),v=t.n(u),h=t(464),m=t.n(h),p=t(372),g={};g.styleTagTransform=m(),g.setAttributes=l(),g.insert=d().bind(null,"head"),g.domAPI=s(),g.insertStyleElement=v(),a()(p.Z,g);const f=p.Z&&p.Z.locals?p.Z.locals:void 0},208:(e,n,t)=>{t.r(n),t.d(n,{default:()=>f});var r=t(62),a=t.n(r),i=t(36),s=t.n(i),o=t(793),d=t.n(o),c=t(892),l=t.n(c),u=t(173),v=t.n(u),h=t(464),m=t.n(h),p=t(364),g={};g.styleTagTransform=m(),g.setAttributes=l(),g.insert=d().bind(null,"head"),g.domAPI=s(),g.insertStyleElement=v(),a()(p.Z,g);const f=p.Z&&p.Z.locals?p.Z.locals:void 0},839:(e,n,t)=>{t.r(n),t.d(n,{default:()=>f});var r=t(62),a=t.n(r),i=t(36),s=t.n(i),o=t(793),d=t.n(o),c=t(892),l=t.n(c),u=t(173),v=t.n(u),h=t(464),m=t.n(h),p=t(174),g={};g.styleTagTransform=m(),g.setAttributes=l(),g.insert=d().bind(null,"head"),g.domAPI=s(),g.insertStyleElement=v(),a()(p.Z,g);const f=p.Z&&p.Z.locals?p.Z.locals:void 0},62:e=>{var n=[];function t(e){for(var t=-1,r=0;r<n.length;r++)if(n[r].identifier===e){t=r;break}return t}function r(e,r){for(var i={},s=[],o=0;o<e.length;o++){var d=e[o],c=r.base?d[0]+r.base:d[0],l=i[c]||0,u="".concat(c," ").concat(l);i[c]=l+1;var v=t(u),h={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==v)n[v].references++,n[v].updater(h);else{var m=a(h,r);r.byIndex=o,n.splice(o,0,{identifier:u,updater:m,references:1})}s.push(u)}return s}function a(e,n){var t=n.domAPI(n);return t.update(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap&&n.supports===e.supports&&n.layer===e.layer)return;t.update(e=n)}else t.remove()}}e.exports=function(e,a){var i=r(e=e||[],a=a||{});return function(e){e=e||[];for(var s=0;s<i.length;s++){var o=t(i[s]);n[o].references--}for(var d=r(e,a),c=0;c<i.length;c++){var l=t(i[c]);0===n[l].references&&(n[l].updater(),n.splice(l,1))}i=d}}},793:e=>{var n={};e.exports=function(e,t){var r=function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}},173:e=>{e.exports=function(e){var n=document.createElement("style");return e.setAttributes(n,e.attributes),e.insert(n,e.options),n}},892:(e,n,t)=>{e.exports=function(e){var n=t.nc;n&&e.setAttribute("nonce",n)}},36:e=>{e.exports=function(e){var n=e.insertStyleElement(e);return{update:function(t){!function(e,n,t){var r="";t.supports&&(r+="@supports (".concat(t.supports,") {")),t.media&&(r+="@media ".concat(t.media," {"));var a=void 0!==t.layer;a&&(r+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),r+=t.css,a&&(r+="}"),t.media&&(r+="}"),t.supports&&(r+="}");var i=t.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),n.styleTagTransform(r,e,n.options)}(n,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)}}}},464:e=>{e.exports=function(e,n){if(n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}},645:(e,n,t)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Navigation=void 0,t(672),n.Navigation=class{constructor(){this.navigationMenu=document.querySelector(".navigation")}setListener(){this.navigationMenu.addEventListener("click",this.showPage)}showPage(e){if(!(e.target instanceof HTMLElement))throw new Error("Error");const n=e.target;if(n.dataset.page){const e=document.querySelector(`.${n.dataset.page}-page`);if(null==e?void 0:e.classList.contains("active"))return;{const n=document.querySelector(".active");null==n||n.classList.remove("active"),null==e||e.classList.add("active")}}}}},153:function(e,n,t){var r=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(a,i){function s(e){try{d(r.next(e))}catch(e){i(e)}}function o(e){try{d(r.throw(e))}catch(e){i(e)}}function d(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,o)}d((r=r.apply(e,n||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.Controlls=n.resetCars=void 0;const a=t(276),i=t(187),s=t(855);t(381),n.resetCars=()=>r(void 0,void 0,void 0,(function*(){const e=document.querySelectorAll('[data-destiny="stop"]');document.querySelector('[data-destiny="reset"]').classList.add("disabled"),e.forEach((e=>r(void 0,void 0,void 0,(function*(){e.classList.contains("disabled")||(0,a.stopCar)(e)})))),a.raceStatus.started=!1})),n.Controlls=class{constructor(){this.controllsMenu=document.querySelector(".controlls-container"),this.garage=document.querySelector(".garage"),this.baseUrl="http://127.0.0.1:3000"}setListener(){this.controllsMenu.addEventListener("click",(e=>{if(!(e.target instanceof HTMLElement))throw new Error("Error");const t=e.target,r=document.querySelector('[data-destiny="create-name"]').value,a=document.querySelector('[data-destiny="create-color"]').value;if(!t.classList.contains("disabled"))switch(t.dataset.destiny){case"create":return void this.createCar(r,a);case"update":return void this.updateCar();case"race":return void this.startRace();case"reset":return void(0,n.resetCars)();case"generate":return void this.generateCars(100)}}))}createCar(e,n){var t;return r(this,void 0,void 0,(function*(){const r=yield fetch(`${this.baseUrl}/garage`,{method:"POST",body:JSON.stringify({name:e,color:n}),headers:{"Content-type":"application/json; charset=UTF-8"}}),a=yield r.json();this.garage.querySelectorAll(".car").length<7&&this.createGarageLine(e,a.id,n),document.querySelector('[data-destiny="create-name"]').value="";const i=document.querySelector(".cars-count"),s=Number(i.innerHTML);i.innerHTML=String(s+1);const o=Number(document.querySelector(".page-number").innerHTML);Math.ceil(Number(i.innerHTML)/7)>o&&(null===(t=document.querySelector('[data-destiny="next"]'))||void 0===t||t.classList.remove("disabled")),document.querySelector('[data-destiny="create-color"]').value="#ffffff"}))}createGarageLine(e,n,t){const r=document.createElement("div");r.className="garage-line",r.innerHTML=`\n    <div class="flex-row">\n    <button class="button blue" data-destiny="select">select</button>\n    <button class="button blue" data-destiny="remove">remove</button>\n    <h4>${e}</h4>\n    </div>\n    \n    <div class="garage-road">\n    \n        <div class="engine-controlls">\n          <button class="engine-button" data-destiny="start">a</button>\n          <button class="engine-button disabled" data-destiny="stop">b</button>\n        </div>\n\n        <div class="race-direction">\n          <div class="car" id="${n}" data-name="${e}" style="background-color: ${t};"></div>\n          <div class="finish-line"></div>\n        </div>\n\n      </div>\n    `,this.garage.append(r)}updateCar(){var e;return r(this,void 0,void 0,(function*(){const n=document.querySelector(".selected"),t=document.querySelector('[data-destiny="update-name"]'),r=document.querySelector('[data-destiny="update-color"]');try{yield fetch(`${this.baseUrl}/garage/${Number(n.id)}`,{method:"PUT",body:JSON.stringify({name:t.value,color:r.value}),headers:{"Content-type":"application/json; charset=UTF-8"}})}catch(e){throw new Error("car doesn't exist!")}n.style.backgroundColor=r.value,n.closest(".garage-line").querySelector("h4").innerHTML=t.value,n.dataset.name=t.value,document.querySelector(`[data-winner="${n.id}"]`)&&(0,a.renderWinners)(10),t.value="",t.setAttribute("disabled","disabled"),r.value="#ffffff",r.setAttribute("disabled","disabled"),null===(e=document.querySelector('[data-destiny="update"]'))||void 0===e||e.classList.add("disabled")}))}startRace(){return r(this,void 0,void 0,(function*(){a.raceStatus.started=!0,document.querySelector('[data-destiny="reset"]').classList.add("disabled");const e=document.querySelectorAll('[data-destiny="start"]');let n="";e.forEach((e=>r(this,void 0,void 0,(function*(){const t=yield(0,a.startCar)(e);if(t.response&&!n&&a.raceStatus.started){const e=Number((parseInt(t.time)/1e3).toFixed(2)),r=t.carName,a=document.querySelector(`[data-name="${r}"]`),s=Number(a.id),o=a.style.backgroundColor;n=`Winner: ${r}! Time: ${e}s`;const d=document.createElement("div");d.className="winner-message",d.innerHTML=n,document.body.append(d),document.querySelector('[data-destiny="reset"]').classList.remove("disabled"),setTimeout((()=>{d.remove()}),5e3),(0,i.writeRaceResult)(s,r,o,e)}}))))}))}fetchUrl(e,n,t){return r(this,void 0,void 0,(function*(){const r=yield fetch(`${this.baseUrl}${e}`,{method:n,headers:t});return yield r.json()}))}generateCars(e){return r(this,void 0,void 0,(function*(){const n=document.querySelector('[data-destiny="generate"]');null==n||n.classList.add("disabled");for(let n=0;n<e;n++){const e=`${s.brandsCars[(0,a.getRandomNumber)(50)]} ${s.modelsCars[(0,a.getRandomNumber)(50)]}`;yield this.createCar(e,this.randomHexColor())}n.classList.remove("disabled")}))}randomHexColor(){return"#"+(1048575*Math.random()*1e6).toString(16).slice(0,6)}}},622:function(e,n,t){var r=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(a,i){function s(e){try{d(r.next(e))}catch(e){i(e)}}function o(e){try{d(r.throw(e))}catch(e){i(e)}}function d(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,o)}d((r=r.apply(e,n||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.Garage=void 0;const a=t(276),i=t(276),s=t(276);t(305),n.Garage=class{constructor(){this.garage=document.querySelector(".garage"),this.baseUrl="http://127.0.0.1:3000"}setListener(){this.garage.addEventListener("click",(e=>{if(!(e.target instanceof HTMLElement))throw new Error("Error");const n=e.target;if(!n.classList.contains("disabled"))switch(n.dataset.destiny){case"select":return void this.selectCar(e.target);case"remove":return void this.removeCar(e.target);case"start":return void(0,a.startCar)(e.target);case"stop":return void(0,i.stopCar)(e.target)}}))}selectCar(e){var n,t;const r=e.closest(".garage-line"),a=r.querySelector(".car"),i=r.querySelector("h4").innerHTML;document.querySelector(".selected")&&(null===(n=document.querySelector(".selected"))||void 0===n||n.classList.remove("selected")),a.classList.add("selected");const s=document.querySelector('[data-destiny="update-name"]'),o=document.querySelector('[data-destiny="update-color"]');s.removeAttribute("disabled"),s.value=i,o.removeAttribute("disabled");const d=a.style.backgroundColor.slice(4,-1).split(", ").map((e=>Number(e))),c=this.rgbToHex(d[0],d[1],d[2]);o.value=c,null===(t=document.querySelector('[data-destiny="update"]'))||void 0===t||t.classList.remove("disabled")}removeCar(e){return r(this,void 0,void 0,(function*(){a.raceStatus.started&&(a.raceStatus.started=!1,document.querySelectorAll('[data-destiny="remove"]').forEach((e=>{e.classList.add("disabled")})));const n=e.closest(".garage-line").querySelector(".car");yield fetch(`${this.baseUrl}/garage/${Number(n.id)}`,{method:"DELETE"}).then((()=>{const e=document.querySelector(".cars-count");e.innerHTML=String(Number(e.innerHTML)-1)})).then((()=>r(this,void 0,void 0,(function*(){var e,t;yield(0,s.renderGarage)(7),document.querySelector(`[data-winner="${n.id}"]`)&&(yield(0,a.renderWinners)(10)),null===(e=document.querySelector('[data-destiny="race"]'))||void 0===e||e.classList.remove("disabled"),null===(t=document.querySelector('[data-destiny="reset"]'))||void 0===t||t.classList.add("disabled")})))).catch((()=>{console.log("smth went wrong")})),yield fetch(`http://127.0.0.1:3000/winners/${n.id}`,{method:"GET"}).then((e=>r(this,void 0,void 0,(function*(){yield e.json()})))).then((()=>r(this,void 0,void 0,(function*(){yield fetch(`${this.baseUrl}/winners/${Number(n.id)}`,{method:"DELETE"})})))).catch((()=>{console.log("this car have never been a winner")}))}))}rgbToHex(e,n,t){return"#"+((1<<24)+(e<<16)+(n<<8)+t).toString(16).slice(1)}}},103:function(e,n,t){var r=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(a,i){function s(e){try{d(r.next(e))}catch(e){i(e)}}function o(e){try{d(r.throw(e))}catch(e){i(e)}}function d(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,o)}d((r=r.apply(e,n||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.Render=void 0,t(742);const a=t(276),i=t(153);n.Render=class{constructor(){this.setNavigationListeners=e=>r(this,void 0,void 0,(function*(){var n;if(!(e.target instanceof HTMLElement))throw new Error("Error");const t=e.target;if(t.classList.contains("disabled"))return;yield(0,i.resetCars)();const r=document.querySelector(".page-number");"next"===t.dataset.destiny?this.toNextPage(r):"prev"===t.dataset.destiny&&this.toPrevPage(r),yield(0,a.renderGarage)(this.carsPageLimit);const s=document.querySelector('[data-destiny="update-name"]');s.value="",s.setAttribute("disabled","disabled");const o=document.querySelector('[data-destiny="update-color"]');o.value="#ffffff",o.setAttribute("disabled","disabled"),null===(n=document.querySelector('[data-destiny="update"]'))||void 0===n||n.classList.add("disabled")})),this.garage=document.querySelector(".garage"),this.winners=document.querySelector(".winners"),this.baseUrl="http://127.0.0.1:3000",this.carsPageLimit=7,this.carsCounter=document.querySelector(".cars-count"),this.prevButton=document.querySelector('[data-destiny="prev"]'),this.nextButton=document.querySelector('[data-destiny="next"]'),this.garageNavigation=document.querySelector(".garage-navigation"),this.garageNavigation.addEventListener("click",this.setNavigationListeners)}toNextPage(e){e.innerHTML=String(Number(e.innerHTML)+1),Math.ceil(Number(this.carsCounter.innerHTML)/this.carsPageLimit)===Number(e.innerHTML)&&this.nextButton.classList.add("disabled"),this.prevButton.classList.contains("disabled")&&this.prevButton.classList.remove("disabled")}toPrevPage(e){e.innerHTML=String(Number(e.innerHTML)-1),Math.ceil(Number(this.carsCounter.innerHTML)/this.carsPageLimit)>Number(e.innerHTML)&&this.nextButton.classList.remove("disabled"),1===Number(e.innerHTML)&&this.prevButton.classList.add("disabled")}renderGarageCounter(){return r(this,void 0,void 0,(function*(){const e=yield this.fetchUrl("/garage","GET");this.carsCounter.innerHTML=e.length,e.length>7&&this.nextButton.classList.remove("disabled")}))}fetchUrl(e,n){return r(this,void 0,void 0,(function*(){const t=yield fetch(`${this.baseUrl}${e}`,{method:n});return yield t.json()}))}}},187:function(e,n,t){var r=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(a,i){function s(e){try{d(r.next(e))}catch(e){i(e)}}function o(e){try{d(r.throw(e))}catch(e){i(e)}}function d(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,o)}d((r=r.apply(e,n||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.writeRaceResult=n.Winners=void 0;const a=t(276);function i(e,n,t){return r(this,void 0,void 0,(function*(){const i=document.querySelector(".winners-page-number").innerHTML;document.querySelector(".winners").innerHTML="";const s=`/winners/?_page=${i}&_limit=${e}&_sort=${n}&_order=${t}`;yield(0,a.fetchUrl)(s,"GET").then((e=>r(this,void 0,void 0,(function*(){console.log(e);for(const n of e){const e=`/garage/${n.id}`,t=yield(0,a.fetchUrl)(e,"GET");yield(0,a.renderWinnerLine)(t.id,t.name,t.color,n.wins,n.time)}}))))}))}t(208),n.Winners=class{constructor(){this.winners=document.querySelector(".winners"),this.winnersCounter=document.querySelector(".winners-count"),this.navigation=document.querySelector(".winners-navigation"),this.nextButton=document.querySelector('[data-destiny="next-win"]'),this.prevButton=document.querySelector('[data-destiny="prev-win"]')}setListeners(){var e;this.navigation.addEventListener("click",(e=>{if(!(e.target instanceof HTMLElement))throw new Error("Error");const n=e.target;if(n.classList.contains("disabled"))return;const t=document.querySelector(".winners-page-number");"next-win"===n.dataset.destiny?(t.innerHTML=String(Number(t.innerHTML)+1),Math.ceil(Number(this.winnersCounter.innerHTML)/10)===Number(t.innerHTML)&&this.nextButton.classList.add("disabled"),this.prevButton.classList.contains("disabled")&&this.prevButton.classList.remove("disabled"),(0,a.renderWinners)(10)):"prev-win"===n.dataset.destiny&&(t.innerHTML=String(Number(t.innerHTML)-1),Math.ceil(Number(this.winnersCounter.innerHTML)/10)>Number(t.innerHTML)&&this.nextButton.classList.remove("disabled"),1===Number(t.innerHTML)&&this.prevButton.classList.add("disabled"),(0,a.renderWinners)(10))})),null===(e=document.querySelector(".winners-header"))||void 0===e||e.addEventListener("click",(e=>{if(!(e.target instanceof HTMLElement))throw new Error("Error");const n=e.target;if(!n.classList.contains("disabled"))switch(n.dataset.destiny){case"sort-wins":return void("tobig"===n.dataset.sort?(i(10,"wins","DESC"),n.dataset.sort="tosmall"):(i(10,"wins","ASC"),n.dataset.sort="tobig"));case"sort-time":return void("toslow"===n.dataset.sort?(i(10,"time","DESC"),n.dataset.sort="tofast"):(i(10,"time","ASC"),n.dataset.sort="toslow"))}}))}},n.writeRaceResult=function(e,n,t,i){return r(this,void 0,void 0,(function*(){const s=yield function(e){return r(this,void 0,void 0,(function*(){const n=yield(0,a.fetchUrl)(`/winners/${e}`,"GET");return 0!==Object.keys(n).length}))}(e);s?function(e,n){r(this,void 0,void 0,(function*(){const t=yield fetch(`http://127.0.0.1:3000/winners/${e}`,{method:"GET"}),r=yield t.json();let i=r.time;n<r.time&&(i=n),yield fetch(`http://127.0.0.1:3000/winners/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({wins:Number(r.wins)+1,time:i})}).then((()=>{document.querySelector(`[data-winner="${e}"]`)&&(0,a.renderWinners)(10)}))}))}(e,i):function(e,n,t,i){r(this,void 0,void 0,(function*(){yield fetch("http://127.0.0.1:3000/winners",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,wins:1,time:i})}).then((()=>{10!==document.querySelectorAll(".winners-line").length&&(0,a.renderWinnerLine)(e,n,t,1,i)}))}))}(e,n,t,i)}))}},855:(e,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.brandsCars=n.modelsCars=void 0,n.modelsCars=["Roadster","S","X","3","Y","Cybertruck","X5","X7","X3","X6","GT4","FXX","599 GTO","Enzo","458 Italia","250 GTO","Priora","4x4","Rio","Focus","Kalina","Vesta","Spark","Lacetti","Nexia","Matiz","Cobalt","Captiva","A7","A5","A3","A8","TT","Corolla","Camry","RAV4","Impreza","WRX","ES","LS","RX","GX","LX","GS","LC500","Gallardo","Aventador","911","Cayenne","FX37"],n.brandsCars=["Audi","Alfa Romeo","Alpina","Aston Martin","Axon","Ford","Ferrari","Fiat","GAZ","GMC","Honda","Hummer","Hyundai","Infiniti","Isuzu","JAC","Jaguar","Jeep","Kamaz","Lada","Lexus","Lotus","MAN","Maybach","MAZ","Mazda","McLaren","Nissan","Opel","Paccar","Pagani","Pontiac","Porsche","Renault","Å koda","Smart","Subaru","Suzuki","Tesla","Toyota","UAZ","Volvo","ZAZ","XPeng","TVR","Saab","RAM","Chevrolet","Mazzanti","Daewoo"]},276:function(e,n){var t=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(a,i){function s(e){try{d(r.next(e))}catch(e){i(e)}}function o(e){try{d(r.throw(e))}catch(e){i(e)}}function d(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,o)}d((r=r.apply(e,n||[])).next())}))};function r(e,n){return t(this,void 0,void 0,(function*(){const t=yield fetch(`http://127.0.0.1:3000${e}`,{method:n});return yield t.json()}))}function a(e,n,r,a,i){return t(this,void 0,void 0,(function*(){const t=document.createElement("div");t.className="garage-line",t.dataset.winner=n,t.innerHTML=`\n  <div class="winners-line" data-winner="${e}">\n    <div class="winners-cell small">${e}</div>\n    <div class="winners-cell">\n      <div class="car" style="background-color: ${r};"></div>\n    </div>\n    <div class="winners-cell">${n}</div>\n    <div class="winners-cell" data-wins="${a}">${a}</div>\n    <div class="winners-cell" data-time="${i}">${i}</div>\n  </div>\n  `,document.querySelector(".winners").append(t)}))}Object.defineProperty(n,"__esModule",{value:!0}),n.renderStartHtml=n.renderWinners=n.renderWinnerLine=n.renderGarage=n.stopCar=n.startCar=n.getRandomNumber=n.fetchUrl=n.raceStatus=void 0,n.raceStatus={started:!1},n.fetchUrl=r,n.getRandomNumber=function(e){return Math.floor(Math.random()*e)},n.startCar=function(e){return t(this,void 0,void 0,(function*(){const a=e.closest(".garage-line").querySelector(".car");e.classList.add("disabled"),document.querySelector('[data-destiny="race"]').classList.add("disabled");const i=yield r(`/engine?id=${a.id}&status=started`,"PATCH").then((e=>{const n=e.distance/e.velocity;return a.style.animationDuration=`${n}ms`,e})).then((()=>t(this,void 0,void 0,(function*(){var t;const r=fetch(`http://127.0.0.1:3000/engine?id=${a.id}&status=drive`,{method:"PATCH"});return a.classList.add("drive"),null===(t=e.nextElementSibling)||void 0===t||t.classList.remove("disabled"),n.raceStatus.started||document.querySelector('[data-destiny="reset"]').classList.remove("disabled"),r})))).then((e=>t(this,void 0,void 0,(function*(){return yield e.json()})))).catch((()=>t(this,void 0,void 0,(function*(){a.classList.add("crash")}))));return a.dataset.name||(a.dataset.name="unknown name"),{response:i,carName:a.dataset.name,time:a.style.animationDuration}}))},n.stopCar=function(e){return t(this,void 0,void 0,(function*(){const t=e.closest(".garage-line").querySelector(".car");e.classList.add("disabled"),yield r(`/engine?id=${t.id}&status=stopped`,"PATCH").then((()=>{var r;t.classList.remove("drive"),t.classList.remove("crash"),null===(r=e.previousElementSibling)||void 0===r||r.classList.remove("disabled"),document.querySelector(".drive")||(document.querySelector('[data-destiny="reset"]').classList.add("disabled"),document.querySelector('[data-destiny="race"]').classList.remove("disabled"),n.raceStatus.started=!1)})).catch((()=>{console.log("error while trying to stop car")}))}))},n.renderGarage=function(e){return t(this,void 0,void 0,(function*(){const n=document.querySelector(".garage");n.innerHTML="";const t=`/garage/?_page=${document.querySelector(".page-number").innerHTML}&_limit=${e}`,a=yield r(t,"GET");for(let e=0;e<a.length;e++){const t=document.createElement("div");t.className="garage-line",t.innerHTML=`\n    <div class="flex-row">\n    <button class="button blue" data-destiny="select">select</button>\n    <button class="button blue" data-destiny="remove">remove</button>\n    <h4>${a[e].name}</h4>\n    </div>\n    \n    <div class="garage-road">\n    \n    <div class="engine-controlls">\n    <button class="engine-button" data-destiny="start">a</button>\n    <button class="engine-button disabled" data-destiny="stop">b</button>\n    </div>\n    \n    <div class="race-direction">\n    <div class="car" id="${a[e].id}" data-name="${a[e].name}" style="background-color: ${a[e].color};"></div>\n    <div class="finish-line"></div>\n    </div>\n    \n    </div>\n    `,n.append(t)}}))},n.renderWinnerLine=a,n.renderWinners=function(e){var n;return t(this,void 0,void 0,(function*(){const i=document.querySelector(".winners-page-number").innerHTML,s=document.querySelector(".winners-count"),o=yield r("/winners","GET");s.innerHTML=String(o.length),Math.ceil(o.length/e)>Number(i)&&(null===(n=document.querySelector('[data-destiny="next-win"]'))||void 0===n||n.classList.remove("disabled")),document.querySelector(".winners").innerHTML="";const d=`/winners/?_page=${i}&_limit=${e}`;yield r(d,"GET").then((e=>t(this,void 0,void 0,(function*(){for(const n of e){const e=`/garage/${n.id}`,t=yield r(e,"GET");yield a(t.id,t.name,t.color,n.wins,n.time)}}))))}))},n.renderStartHtml=()=>{document.querySelector("body").innerHTML='\n  <header>\n    <nav class="navigation">\n      <button class="button" data-page="garage">garage</button>\n      <button class="button" data-page="winners">winners</button>\n    </nav>\n  </header>\n\n  <main>\n\n    <div class="garage-page page-container active">\n\n      <div class="controlls-container">\n\n        <div class="controlls-container_controlls-line" data-controlls-line="create">\n          <input type="text" class="input-text" data-destiny="create-name">\n          <input type="color" value="#ffffff" class="input-color" data-destiny="create-color">\n          <button class="button blue" data-destiny="create">create</button>\n        </div>\n        \n        <div class="controlls-container_controlls-line" data-controlls-line="update">\n          <input type="text" class="input-text" data-destiny="update-name" disabled>\n          <input type="color" value="#ffffff" class="input-color" data-destiny="update-color" disabled>\n          <button class="button blue disabled" data-destiny="update">update</button>\n        </div>\n        \n        <div class="controlls-container_controlls-line">\n          <a href="#race"><button class="button" data-destiny="race">race</button></a>\n          <button class="button disabled" data-destiny="reset">reset</button>\n          <button class="button blue" data-destiny="generate">generate cars</button>\n        </div>\n\n      </div>\n\n      <h3>garage (<span class="cars-count">0</span>)</h3>\n      <h4>page #<span class="page-number">1</span></h4>\n\n      <div class="garage" id="race">\n         \n      </div>\n\n      <div class="flex-row center-content garage-navigation">\n        <button class="button blue disabled" data-destiny="prev">prev</button>\n        <button class="button blue disabled" data-destiny="next">next</button>\n      </div>\n\n    </div>\n    \n\n\n\n    <div class="winners-page page-container">\n\n      <h3>winners (<span class="winners-count">0</span>)</h3>\n      <h4>page #<span class="winners-page-number">1</span></h4>\n\n      <div class="winners-header">\n        <div class="winners-cell small">ID</div>  \n        <div class="winners-cell">Car</div>  \n        <div class="winners-cell">Name</div>  \n        <div class="winners-cell" data-sort="tobig" data-destiny="sort-wins">Wins</div>  \n        <div class="winners-cell" data-sort="tofast" data-destiny="sort-time">Time</div>\n      </div>\n\n      <div class="winners">\n        <div class="winners-line">\n          <div class="winners-cell small"></div>\n          <div class="winners-cell"></div>\n          <div class="winners-cell"></div>\n          <div class="winners-cell"></div>\n          <div class="winners-cell"></div>\n        </div>\n      </div>\n\n      <div class="flex-row center-content winners-navigation">\n        <button class="button blue disabled" data-destiny="prev-win">prev</button>\n        <button class="button blue disabled" data-destiny="next-win">next</button>\n      </div>\n\n    </div>\n\n  </main>\n\n  <footer>\n\n  </footer>\n  '}},637:e=>{e.exports='data:image/svg+xml;utf8,<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd"><path d="M21.883 12l-7.527 6.235.644.765 9-7.521-9-7.479-.645.764 7.529 6.236h-21.884v1h21.883z"/></svg>'},10:(e,n,t)=>{e.exports=t.p+"assets/race-car..svg"}},n={};function t(r){var a=n[r];if(void 0!==a)return a.exports;var i=n[r]={id:r,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.exports}t.m=e,t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var n=t.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var r=n.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})(),t.b=document.baseURI||self.location.href,(()=>{t(839);const e=t(645),n=t(153),r=t(103),a=t(622),i=t(187),s=t(276);(0,s.renderStartHtml)(),(new r.Render).renderGarageCounter(),(0,s.renderGarage)(7),(0,s.renderWinners)(10),(new e.Navigation).setListener(),(new n.Controlls).setListener(),(new a.Garage).setListener(),(new i.Winners).setListeners()})()})();